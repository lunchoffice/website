import{a as Tt,b as Un}from"https://st-p.rmcdn1.net/3233e0ca/dist/c/c-HMVHNYGJ.js";import{b as bt,k as Dn}from"https://st-p.rmcdn1.net/3233e0ca/dist/c/c-RCATEAZ7.js";import{c as St,d as ft,e as xt,f as yt,h as wt,j as kt,o as Ct,p as Ln}from"https://st-p.rmcdn1.net/3233e0ca/dist/c/c-WGBKAOYK.js";import{a as Pt,b as _n}from"https://st-p.rmcdn1.net/3233e0ca/dist/c/c-AZOAPSEC.js";import{c as ne,d as ze}from"https://st-p.rmcdn1.net/3233e0ca/dist/c/c-664SNB3Y.js";import{a as ht,b as En}from"https://st-p.rmcdn1.net/3233e0ca/dist/c/c-TLV3A63Q.js";import{d as oe,g as V,l as Fe,m as A,n as fe}from"https://st-p.rmcdn1.net/3233e0ca/dist/c/c-FXYSYPKH.js";import{g as mt,l as In}from"https://st-p.rmcdn1.net/3233e0ca/dist/c/c-TCW7AU5B.js";import{E as vn,j as gt}from"https://st-p.rmcdn1.net/3233e0ca/dist/c/c-TZI6EFTZ.js";import{b as je,e as Bn}from"https://st-p.rmcdn1.net/3233e0ca/dist/c/c-4V3WR64N.js";import{C as xe,D as i,E as g,F as q}from"https://st-p.rmcdn1.net/3233e0ca/dist/c/c-VKA7MXOG.js";import{a as Ve}from"https://st-p.rmcdn1.net/3233e0ca/dist/c/c-372VUFQL.js";import{a as k,b as Q}from"https://st-p.rmcdn1.net/3233e0ca/dist/c/c-LKG22B6Y.js";import{b as ce,c as An}from"https://st-p.rmcdn1.net/3233e0ca/dist/c/c-WPBW27TF.js";import{c as Mn,d as ut,f as On}from"https://st-p.rmcdn1.net/3233e0ca/dist/c/c-5DYTLJBW.js";import{b as ct}from"https://st-p.rmcdn1.net/3233e0ca/dist/c/c-CVTAH4UK.js";import{a as B,d as pe,f as Se}from"https://st-p.rmcdn1.net/3233e0ca/dist/c/c-YGS3YKY6.js";var $e=B(()=>{"use strict"});var ie=B(()=>{"use strict"});function l({children:e}){return i(je,{textStyle:"small",children:e})}function p({children:e}){return i(je,{textStyle:"small",fontStyle:"italic",children:e})}var qe=B(()=>{"use strict";Bn();q()});var j,W,Wt,vt=B(()=>{"use strict";qe();ie();q();j={TextWidget:g(l,{children:["Click on the ",i(p,{children:"plus"})," in the lower-left panel and choose a Text widget"]}),TextWidgetOpenPanel:"Select the text widget to get back on track",PictureWidgetSelect:g(l,{children:["Click on the ",i(p,{children:"plus"})," in the lower-left panel and add a Picture widget"]}),PictureWidgetUse:"Select the picture widget again",ButtonWidgetSelect:g(l,{children:["Click on the plus and choose a ",i(p,{children:"Button"})," widget"]}),ButtonWidgetAdjustVisualProperties:"Select the button widget you added earlier",ButtonWidgetAddLink:"Select the button widget you added earlier",CreateLayout:g(l,{children:["\u0421lick the ",i(p,{children:"Devices"})," icon to add a mobile layout"]}),CreateLayoutSelect:g(l,{children:["\u0421lick the ",i(p,{children:"Devices"})," icon to add a mobile layout"]})},W={TextWidget:g(l,{children:["First, let\u2019s learn how to work with text blocks. Click here to add a ",i(p,{children:"Text"})," widget"]}),TextWidgetOpenPanel:g(l,{children:["Now open the ",i(p,{children:"Typography"})," panel"]}),TextWidgetProperties:"Change the font size to 13 and click on the empty area",TextWidgetSelect:i(l,{children:"Let\u2019s say you want to finish text editing\u2014just click on any empty area"}),TextWidgetDrag:i(l,{children:"Now drag the text to its placeholder (a place reserved for a particular element)"}),PictureWidget:g(l,{children:["You\u2019re off to a good start! Now click on the ",i(p,{children:"plus"})," to start adding a picture"]}),PictureWidgetSelect:g(l,{children:["Choose the ",i(p,{children:"Picture"})," widget"]}),PictureWidgetUse:"Click on the Unsplash icon and pick a picture of a building",PictureWidgetChoose:"Pick a picture building",PictureWidgetClickOutside:"Now let\u2019s align this widget to the grid. Click on the empty area",SelectGrids:g(l,{children:["Then select ",i(p,{children:"Grid & Guides"})]}),ChangeGrids:g(l,{children:["The 3 dots on the right top of the settings correspond to 3 grid presets",i("br",{}),"Click on the last dot"]}),PictureWidgetPlace:"Move the picture to its placeholder and align it to the grid",EverythingInItsRightPlace:"Check that all the added widgets are aligned to the grid and click on empty area",TurnOffGuides:g(l,{children:["Disable the guides by pressing the ",i(p,{children:"H"})," key"]}),PageHeight:g(l,{children:["Now we\u2019ll decrease the page height.",i("br",{}),"Scroll down and drag the ",i(p,{children:"Blue Diamond"})," up"]}),OpenLayersPanel:g(l,{children:["Go to the ",i(p,{children:"Layers"})," panel by pressing ",i(p,{children:"Q"})," to delete placeholders no longer needed"]}),SelectBlocksAndDelete:g(l,{children:["Select widget groups of placeholders and press ",i(p,{children:"Delete"})]}),DeleteBlocks:g(l,{children:["Go to the ",i(p,{children:"Layers"})," panel by pressing ",i(p,{children:"Q"})," and delete no longer needed widget groups of placeholders"]}),ButtonWidget:g(l,{children:["Well done, now let\u2019s add a button. Click on the ",i(p,{children:"plus"})," first"]}),ButtonWidgetSelect:g(l,{children:["Choose a ",i(p,{children:"Button"})," widget"]}),ButtonWidgetAdjustVisualProperties:"Change the button color to black and click on the empty area",ButtonWidgetAddLink:g(l,{children:["Choose an ",i(p,{children:"Anchor"})," type link from the dropdown",i("br",{}),"and add it to the button"]}),ButtonWidgetAddLinkType:g(l,{children:["Add ",i(p,{children:"Anchor"})," link to the button"]}),ButtonWidgetAnchorLinkPosition:"Set the place were the anchor link will lead\u2014above the pictures",ButtonWidgetDrag:"Now drag the button to its placeholder",CreateLayout:g(l,{children:["Now let\u2019s see how your design looks in the mobile version",i("br",{}),"Click on the ",i(p,{children:"Devices"})," icon"]}),CreateLayoutSelect:g(l,{children:["Click on the ",i(p,{children:"plus"})," at the top of the Devices panel"]}),AdjustSizes:"It\u2019s time to add the finishing touch. Swap the picture with the text widget",ArrangeMobile:g(l,{children:["Click ",i(p,{children:"Single column"})," to arrange a mobile version"]}),PreviewAndPublish:g(l,{children:["Last step! Click on the ",i(p,{children:"Eye"})," icon to preview your project before publishing"]}),BackToConstructor:g(l,{children:["Hit ",i(p,{children:"Publish"})," or click the pencil icon to go back to the editor"]})},Wt={TextWidget:{name:"TextWidget",text({isPresetPanel:e}={}){return e?g(l,{children:["Open ",i(p,{children:"Widgets"})]}):W.TextWidget},num:1,nextStep:"TextWidgetOpenPanel",widgetSelectionType:"text",fallbackText:j.TextWidget},TextWidgetOpenPanel:{name:"TextWidgetOpenPanel",text:W.TextWidgetOpenPanel,num:2,prevStep:"TextWidget",nextStep:"TextWidgetProperties",fallbackText:j.TextWidgetOpenPanel},TextWidgetProperties:{name:"TextWidgetProperties",text:W.TextWidgetProperties,num:3,prevStep:"TextWidgetOpenPanel",nextStep:"TextWidgetSelect",fallbackText:j.TextWidgetOpenPanel},TextWidgetSelect:{name:"TextWidgetSelect",text:W.TextWidgetSelect,num:4,prevStep:"TextWidgetProperties",nextStep:"TextWidgetDrag"},TextWidgetDrag:{name:"TextWidgetDrag",text:W.TextWidgetDrag,num:5,prevStep:"TextWidgetSelect",nextStep:"ButtonWidget"},ButtonWidget:{name:"ButtonWidget",text:W.ButtonWidget,num:6,prevStep:"TextWidgetDrag",nextStep:"ButtonWidgetSelect"},ButtonWidgetSelect:{name:"ButtonWidgetSelect",text:W.ButtonWidgetSelect,num:7,prevStep:"ButtonWidget",nextStep:"ButtonWidgetDrag",widgetSelectionType:"button",fallbackText:j.ButtonWidgetSelect},ButtonWidgetDrag:{name:"ButtonWidgetDrag",text:W.ButtonWidgetDrag,num:8,prevStep:"ButtonWidgetSelect",nextStep:"ButtonWidgetAdjustVisualProperties"},ButtonWidgetAdjustVisualProperties:{name:"ButtonWidgetAdjustVisualProperties",text:W.ButtonWidgetAdjustVisualProperties,num:9,prevStep:"ButtonWidgetDrag",nextStep:"ButtonWidgetAddLink",fallbackText:j.ButtonWidgetAdjustVisualProperties},ButtonWidgetAddLink:{name:"ButtonWidgetAddLink",text:W.ButtonWidgetAddLink,num:10,prevStep:"ButtonWidgetAdjustVisualProperties",nextStep:"ButtonWidgetAddLinkType",fallbackText:j.ButtonWidgetAddLink},ButtonWidgetAddLinkType:{name:"ButtonWidgetAddLinkType",text:W.ButtonWidgetAddLinkType,num:11,prevStep:"ButtonWidgetAddLink",nextStep:"ButtonWidgetAnchorLinkPosition",fallbackText:j.ButtonWidgetAddLink},ButtonWidgetAnchorLinkPosition:{name:"ButtonWidgetAnchorLinkPosition",text:W.ButtonWidgetAnchorLinkPosition,num:12,prevStep:"ButtonWidgetAddLink",nextStep:"PictureWidget"},PictureWidget:{name:"PictureWidget",text:W.PictureWidget,num:13,prevStep:"ButtonWidgetAddLink",nextStep:"PictureWidgetSelect",widgetSelectionType:"picture"},PictureWidgetSelect:{name:"PictureWidgetSelect",text:W.PictureWidgetSelect,num:14,prevStep:"PictureWidget",nextStep:"PictureWidgetUse",widgetSelectionType:"picture",fallbackText:j.PictureWidgetSelect},PictureWidgetUse:{name:"PictureWidgetUse",text:W.PictureWidgetUse,num:15,prevStep:"PictureWidgetSelect",nextStep:"PictureWidgetChoose",fallbackText:j.PictureWidgetUse},PictureWidgetChoose:{name:"PictureWidgetChoose",text:W.PictureWidgetChoose,num:16,prevStep:"PictureWidgetUse",nextStep:"PictureWidgetClickOutside"},PictureWidgetClickOutside:{name:"PictureWidgetClickOutside",text:W.PictureWidgetClickOutside,num:17,prevStep:"PictureWidgetUse",nextStep:"SelectGrids",fallbackStep:"SelectGrids"},SelectGrids:{name:"SelectGrids",text:W.SelectGrids,num:18,prevStep:"PictureWidgetClickOutside",nextStep:"ChangeGrids"},ChangeGrids:{name:"ChangeGrids",text:W.ChangeGrids,num:19,prevStep:"SelectGrids",nextStep:"PictureWidgetPlace"},PictureWidgetPlace:{name:"PictureWidgetPlace",text:W.PictureWidgetPlace,num:20,prevStep:"ChangeGrids",nextStep:"EverythingInItsRightPlace"},EverythingInItsRightPlace:{name:"EverythingInItsRightPlace",text:W.EverythingInItsRightPlace,num:21,prevStep:"PictureWidgetPlace",nextStep:"TurnOffGuides"},TurnOffGuides:{name:"TurnOffGuides",text:W.TurnOffGuides,num:22,prevStep:"EverythingInItsRightPlace",nextStep:"PageHeight"},PageHeight:{name:"PageHeight",text:W.PageHeight,num:23,prevStep:"TurnOffGuides",nextStep:"OpenLayersPanel"},OpenLayersPanel:{name:"OpenLayersPanel",text:W.OpenLayersPanel,num:24,prevStep:"PageHeight",nextStep:"SelectBlocksAndDelete"},SelectBlocksAndDelete:{name:"SelectBlocksAndDelete",text:W.SelectBlocksAndDelete,num:25,prevStep:"OpenLayersPanel",nextStep:"CreateLayout"},CreateLayout:{name:"CreateLayout",text:W.CreateLayout,num:26,prevStep:"ButtonWidgetAddLink",nextStep:"CreateLayoutSelect",fallbackText:j.CreateLayout},CreateLayoutSelect:{name:"CreateLayoutSelect",text:W.CreateLayoutSelect,num:27,prevStep:"CreateLayout",nextStep:"ArrangeMobile",fallbackText:j.CreateLayoutSelect},ArrangeMobile:{name:"ArrangeMobile",text:W.ArrangeMobile,num:28,prevStep:"CreateLayoutSelect",nextStep:"PreviewAndPublish"},PreviewAndPublish:{name:"PreviewAndPublish",text:W.PreviewAndPublish,num:29,prevStep:"ArrangeMobile",nextStep:"BackToConstructor"},BackToConstructor:{name:"BackToConstructor",text:W.BackToConstructor,num:30,prevStep:"PreviewAndPublish"}}});var _,w,Mt,Ot=B(()=>{"use strict";qe();ie();q();_={OpenBackgroundLayer:g(l,{children:["Open ",i(p,{children:"Background"})," layer"]}),MobileMenuVisible:g(l,{children:["Click on your Mobile menu in ",i(p,{children:"Layers"})]}),BeforeAddAnimations:g(l,{children:["Click on your Mobile menu in ",i(p,{children:"Layers"})]}),ClickOnPaletteIcon:g(l,{children:["\u0421hoose gray color for ",i(p,{children:"Background"})," in ",i(p,{children:"Layers"})]}),ChangeGrids:g(l,{children:["Open ",i(p,{children:"Grid"})," and ",i(p,{children:"Layout"})]}),ClickOnSnapButton:g(l,{children:["Open ",i(p,{children:"Grid"})," and ",i(p,{children:"Layout"})]}),ClickOnSizesButton:g(l,{children:["Open ",i(p,{children:"Grid"})," and ",i(p,{children:"Layout"})]}),TurnOnTheBlocksMode:g(l,{children:["Open ",i(p,{children:"Modes"})]}),SwitchToMobileLayout:g(l,{children:["Switch to the Mobile layout in ",i(p,{children:"Devices"})]}),AddAnimations:i(l,{children:"Click on your Mobile menu again"}),AddTapAnimations:g(l,{children:["Select ",i(p,{children:"Background"})," and ",i(p,{children:"Menu"})," layers and open"," ",i(p,{children:"Animation"})," tab"]}),AddTapMoveAnimations:g(l,{children:["Select ",i(p,{children:"Background"})," and ",i(p,{children:"Menu"})," layers and open"," ",i(p,{children:"Animation"})," tab"]}),SetAnimationValue:g(l,{children:["Select ",i(p,{children:"Background"})," and ",i(p,{children:"Menu"})," layers and open"," ",i(p,{children:"Animation"})," tab"]}),SetAnimationTrigger:g(l,{children:["Select ",i(p,{children:"Background"})," and ",i(p,{children:"Menu"})," layers and open"," ",i(p,{children:"Animation"})," tab"]}),PositionControlClick:i(l,{children:"Click on your Mobile menu again"}),PositionTopRight:g(l,{children:["Open ",i(p,{children:"Position"})," tab"]}),PositionTogglesOn:g(l,{children:["Open ",i(p,{children:"Position"})," tab"]}),SwitchToDesktop:g(l,{children:["Open ",i(p,{children:"Viewer settings"})]}),UseCustomCursor:g(l,{children:["Open ",i(p,{children:"Viewer settings"})]}),PointerCursorUpload:g(l,{children:["Open ",i(p,{children:"Viewer settings"})]})},w={OpenLayersPanel:g(l,{children:["Let's tweak this website a bit. Open ",i(p,{children:"Layers"})," panel ",i("br",{}),"to change the background color"]}),OpenBackgroundLayer:g(l,{children:["Open ",i(p,{children:"Background"})," layer"]}),ClickOnPaletteIcon:i(l,{children:"Choose gray color"}),SelectGrids:g(l,{children:["Now let's align widgets\u2014building blocks your layout ",i("br",{}),"consists of\u2014to the grid. Open ",i(p,{children:"Grid & Guides"})]}),ChangeGrids:g(l,{children:["The 3 dots on the right top of the settings correspond to 3 grid presets",i("br",{}),"Click on the last dot"]}),ClickOnSnapButton:g(l,{children:["Click on ",i(p,{children:"Snap"})," and all widgets will stick to the edges of columns and rows"]}),ClickOnSizesButton:g(l,{children:["Now click on ",i(p,{children:"Sizes"})," to see widgets' exact dimensions"]}),ArrangeWidgetsInTheGrid:i(l,{children:"Arrange widgets in the grid"}),ClickOnModesIcon:g(l,{children:["Now let's adjust distance between the blocks\u2014locked joints of widgets ",i("br",{}),"which help you edit just a part of the layout. Click on the ",i(p,{children:"Modes"})," icon"]}),TurnOnTheBlocksMode:g(l,{children:["Turn on the ",i(p,{children:"Blocks"})," mode"]}),HoverBetweenBlocks:i(l,{children:"Hover on space between blocks"}),SetBlocksDistance:i(l,{children:"Change the distance: type 80 here"}),DeselectAfterSetBlocksDistance:i(l,{children:"Click on empty area"}),DisableBlocksAndGrid:g(l,{children:["Disable ",i(p,{children:"Blocks"})," by pressing B key, and ",i(p,{children:"Guides"}),"\u2014by pressing H key"]}),OpenMobileLayout:i(l,{children:"Take a look at the Mobile layout"}),SwitchToMobileLayout:i(l,{children:"Switch to the Mobile layout"}),FindVisibleMobileMenu:g(l,{children:["Open ",i(p,{children:"Layers"}),"\u2014we\u2019re going to replace the navigation bar with a burger menu"]}),DeleteVisibleMobileMenu:g(l,{children:["Hover over this group and click on ",i(p,{children:"Eye"})," icon to hide the menu for mobile.",i("br",{}),"It will stay at the desktop, as Readymag\u2019s desktop-first tool"]}),MobileMenuVisible:g(l,{children:["Make it visible by clicking on the layer and pressing ",i(p,{children:"Eye"})," icon"]}),ClickOnTriangleToOpenGroup:g(l,{children:["Click the triangle to the left of this group\u2019s name\u2014",i(p,{children:"Group"}),"\u2014and you\u2019ll open ",i("br",{}),"the mobile menu group. We\u2019re going to animate the menu"]}),BeforeAddAnimations:g(l,{children:["Select ",i(p,{children:"Background"})," and ",i(p,{children:"Menu"})," layers by holding down Shift"]}),AddAnimations:g(l,{children:["Open ",i(p,{children:"Animation"})," settings"]}),AddTapAnimations:g(l,{children:["Choose ",i(p,{children:"Tap"})," animation"]}),AddTapMoveAnimations:g(l,{children:["Add ",i(p,{children:"Move"})," animation to these layers"]}),SetAnimationValue:g(l,{children:["Set the left value to -328. It will let the background ",i("br",{}),"paired with the menu occupy the entire screen"]}),SetAnimationTrigger:g(l,{children:["To set your burger menu as an animation trigger, click ",i(p,{children:"plus"})," first"]}),ClickOnBurgerMenuIcon:i(l,{children:"Then click your burger menu icon\u2014three horizontal lines rightward to the logo"}),FixMenuClickOutside:g(l,{children:["Let's fix the menu so that it stays in place when the page's scrolled. ",i("br",{}),"Click on empty area and then select your mobile menu again."]}),PositionControlClick:g(l,{children:["Click on ",i(p,{children:"Position"})," control"]}),PositionTopRight:i(l,{children:"Choose the top right corner circle to fix the widget to this part of the screen"}),PositionTogglesOn:g(l,{children:["Enable ",i(p,{children:"On All Pages"})," and ",i(p,{children:"Above Pages"})," for the widget group so that it stays ",i("br",{}),"accessible on every page and above the rest of the elements"]}),CheckPreview:i(l,{children:"Check the preview"}),ViewerSettings:g(l,{children:["Let's go to ",i(p,{children:"Viewer settings"})," and take a look at the desktop layout. Your menu is intact here"]}),SwitchToDesktop:i(l,{children:"Switch to Desktop"}),UseCustomCursor:g(l,{children:["Let\u2019s add a custom cursor. Enable ",i(p,{children:"Use custom cursor"})," toggle"]}),PointerCursorUpload:g(l,{children:["You can upload your default and pointer cursors here. ",i("br",{}),"Click on empty space to finish working on the project"]}),GoBackToEditor:g(l,{children:["Let's return to the Editing mode where ",i("br",{}),"you'll continue mastering Readymag"]})},Mt={OpenLayersPanel:{name:"OpenLayersPanel",text:w.OpenLayersPanel,num:1,nextStep:"OpenBackgroundLayer"},OpenBackgroundLayer:{name:"OpenBackgroundLayer",text:w.OpenBackgroundLayer,num:2,prevStep:"OpenLayersPanel",nextStep:"ClickOnPaletteIcon",fallbackText:_.OpenBackgroundLayer},ClickOnPaletteIcon:{name:"ClickOnPaletteIcon",text:w.ClickOnPaletteIcon,num:3,prevStep:"OpenBackgroundLayer",nextStep:"SelectGrids",fallbackText:_.ClickOnPaletteIcon},SelectGrids:{name:"SelectGrids",text:w.SelectGrids,num:4,prevStep:"ClickOnPaletteIcon",nextStep:"ChangeGrids"},ChangeGrids:{name:"ChangeGrids",text:w.ChangeGrids,num:5,prevStep:"SelectGrids",nextStep:"ClickOnSnapButton",fallbackText:_.ChangeGrids},ClickOnSnapButton:{name:"ClickOnSnapButton",text:w.ClickOnSnapButton,num:6,prevStep:"SelectGrids",nextStep:"ClickOnSizesButton",fallbackText:_.ClickOnSnapButton},ClickOnSizesButton:{name:"ClickOnSizesButton",text:w.ClickOnSizesButton,num:7,prevStep:"ClickOnSnapButton",nextStep:"ArrangeWidgetsInTheGrid",fallbackText:_.ClickOnSizesButton},ArrangeWidgetsInTheGrid:{name:"ArrangeWidgetsInTheGrid",text:w.ArrangeWidgetsInTheGrid,num:8,prevStep:"ClickOnSizesButton",nextStep:"ClickOnModesIcon"},ClickOnModesIcon:{name:"ClickOnModesIcon",text:w.ClickOnModesIcon,num:9,prevStep:"ArrangeWidgetsInTheGrid",nextStep:"TurnOnTheBlocksMode"},TurnOnTheBlocksMode:{name:"TurnOnTheBlocksMode",text:w.TurnOnTheBlocksMode,num:10,prevStep:"ClickOnModesIcon",nextStep:"HoverBetweenBlocks",fallbackText:_.TurnOnTheBlocksMode},HoverBetweenBlocks:{name:"HoverBetweenBlocks",text:w.HoverBetweenBlocks,num:11,prevStep:"TurnOnTheBlocksMode",nextStep:"SetBlocksDistance"},SetBlocksDistance:{name:"SetBlocksDistance",text:w.SetBlocksDistance,num:12,prevStep:"HoverBetweenBlocks",nextStep:"DeselectAfterSetBlocksDistance"},DeselectAfterSetBlocksDistance:{name:"DeselectAfterSetBlocksDistance",text:w.DeselectAfterSetBlocksDistance,num:13,prevStep:"SetBlocksDistance",nextStep:"DisableBlocksAndGrid"},DisableBlocksAndGrid:{name:"DisableBlocksAndGrid",text:w.DisableBlocksAndGrid,num:14,prevStep:"SetBlocksDistance",nextStep:"OpenMobileLayout"},OpenMobileLayout:{name:"OpenMobileLayout",text:w.OpenMobileLayout,num:15,prevStep:"DisableBlocksAndGrid",nextStep:"SwitchToMobileLayout"},SwitchToMobileLayout:{name:"SwitchToMobileLayout",text:w.SwitchToMobileLayout,num:16,prevStep:"OpenMobileLayout",nextStep:"FindVisibleMobileMenu",fallbackText:_.SwitchToMobileLayout},FindVisibleMobileMenu:{name:"FindVisibleMobileMenu",text:w.FindVisibleMobileMenu,num:17,prevStep:"SwitchToMobileLayout",nextStep:"DeleteVisibleMobileMenu"},DeleteVisibleMobileMenu:{name:"DeleteVisibleMobileMenu",text:w.DeleteVisibleMobileMenu,num:18,prevStep:"FindVisibleMobileMenu",nextStep:"MobileMenuVisible"},MobileMenuVisible:{name:"MobileMenuVisible",text:w.MobileMenuVisible,num:19,prevStep:"DeleteVisibleMobileMenu",nextStep:"ClickOnTriangleToOpenGroup",fallbackText:_.MobileMenuVisible},ClickOnTriangleToOpenGroup:{name:"ClickOnTriangleToOpenGroup",text:w.ClickOnTriangleToOpenGroup,num:20,prevStep:"MobileMenuVisible",nextStep:"BeforeAddAnimations"},BeforeAddAnimations:{name:"BeforeAddAnimations",text:w.BeforeAddAnimations,num:21,prevStep:"MobileMenuVisible",nextStep:"AddAnimations",fallbackText:_.BeforeAddAnimations},AddAnimations:{name:"AddAnimations",text:w.AddAnimations,num:22,prevStep:"BeforeAddAnimations",nextStep:"AddTapAnimations",fallbackText:_.AddAnimations},AddTapAnimations:{name:"AddTapAnimations",text:w.AddTapAnimations,num:23,prevStep:"AddAnimations",nextStep:"AddTapMoveAnimations",fallbackText:_.AddTapAnimations},AddTapMoveAnimations:{name:"AddTapMoveAnimations",text:w.AddTapMoveAnimations,num:24,prevStep:"AddTapAnimations",nextStep:"SetAnimationValue",fallbackText:_.AddTapMoveAnimations},SetAnimationValue:{name:"SetAnimationValue",text:w.SetAnimationValue,num:25,prevStep:"AddTapAnimations",nextStep:"SetAnimationTrigger",fallbackText:_.SetAnimationValue},SetAnimationTrigger:{name:"SetAnimationTrigger",text:w.SetAnimationTrigger,num:26,prevStep:"SetAnimationValue",nextStep:"ClickOnBurgerMenuIcon",fallbackText:_.SetAnimationTrigger},ClickOnBurgerMenuIcon:{name:"ClickOnBurgerMenuIcon",text:w.ClickOnBurgerMenuIcon,num:27,prevStep:"SetAnimationTrigger",nextStep:"FixMenuClickOutside"},FixMenuClickOutside:{name:"FixMenuClickOutside",text:w.FixMenuClickOutside,num:28,prevStep:"SetAnimationTrigger",nextStep:"PositionControlClick"},PositionControlClick:{name:"PositionControlClick",text:w.PositionControlClick,num:29,prevStep:"FixMenuClickOutside",nextStep:"PositionTopRight",fallbackText:_.PositionControlClick},PositionTopRight:{name:"PositionTopRight",text:w.PositionTopRight,num:30,prevStep:"PositionControlClick",nextStep:"PositionTogglesOn",fallbackText:_.PositionTopRight},PositionTogglesOn:{name:"PositionTogglesOn",text:w.PositionTogglesOn,num:31,prevStep:"PositionTopRight",nextStep:"CheckPreview",fallbackText:_.PositionTogglesOn},CheckPreview:{name:"CheckPreview",text:w.CheckPreview,num:32,prevStep:"PositionTogglesOn",nextStep:"ViewerSettings"},ViewerSettings:{name:"ViewerSettings",text:w.ViewerSettings,num:33,prevStep:"CheckPreview",nextStep:"SwitchToDesktop"},SwitchToDesktop:{name:"SwitchToDesktop",text:w.SwitchToDesktop,num:34,prevStep:"ViewerSettings",nextStep:"UseCustomCursor",fallbackText:_.SwitchToDesktop},UseCustomCursor:{name:"UseCustomCursor",text:w.UseCustomCursor,num:35,prevStep:"SwitchToDesktop",nextStep:"PointerCursorUpload",fallbackText:_.UseCustomCursor},PointerCursorUpload:{name:"PointerCursorUpload",text:w.PointerCursorUpload,num:36,prevStep:"UseCustomCursor",nextStep:"GoBackToEditor",fallbackText:_.PointerCursorUpload},GoBackToEditor:{name:"GoBackToEditor",text:w.GoBackToEditor,num:37,prevStep:"PointerCursorUpload"}}});var At,It=B(()=>{"use strict";ie();At={GettingStartedVideo:{name:"GettingStartedVideo",text:"Getting started",num:1,nextStep:"HelpButton"},HelpButton:{name:"HelpButton",text:"Click here for more learning content",num:2}}});var we,Bt=B(()=>{"use strict";ie();vt();Ot();It();we={default:Wt,pro:Mt,templates:At}});var Ut,Et=B(()=>{"use strict";Q();Ut=()=>{k.post("/api/mailchimp/help-tour-not-finished")}});var ke,Rn,Hn,_t=B(()=>{"use strict";ke=(e,t,r,c)=>{let m=r.findIndex(v=>v.num===e),T=m>=0?r[m]:null,u=e+1,P=null;if(T&&T.children&&T.children.length)if(c[T._id]&&c[T._id].collapsed)P=T._id;else{let v=r[m+1];v?u=v.num:u=T.children[T.children.length-1].num+1}if(!T){let v=t.find(O=>O.num===e);v&&(P=v.parentPage)}return{newPageNum:u,newPageParentId:P}},Rn=(e,t=void 0)=>e.map(r=>r.children?{id:r._id,parentId:t,items:Rn(r.children,r._id)}:{id:r._id,parentId:t}),Hn=e=>e.reduce((t,r)=>(t.push(r),r.items?t.concat(Hn(r.items)):t),[])});var G,Dt=B(()=>{"use strict";G=class{constructor({message:t,tag:r,type:c}){Se(this,"message");Se(this,"type");Se(this,"tag");this.message=t,this.tag=r,this.type=c||"error"}}});var Lt,Rt,Fi,Ht,Gt,Je=B(()=>{"use strict";Q();Lt=e=>k.get(`/api/user/${e}/links`),Rt=e=>k.get(`/api/user/${e}/projects-domains`),Fi=(e,t)=>k.post("/api/checkdomain",{type:e,domain:t}),Ht=e=>k.post("/api/user/creator-profile",e),Gt=e=>k.post("/api/me/opts",e)});var $i,qi,Nt,Ji,Vt,Ft,jt,zt,$t=B(()=>{"use strict";Q();$i=()=>k.get("/api/user_templates/"),qi=async e=>{let{data:t}=await k.get(`/api/help-tour-template/${e}`);return t||{}},Nt=e=>k.delete("/api/template/",{id:e}),Ji=(e,t)=>k.put("/api/template/",{id:e,name:t}),Vt=e=>k.post("/api/submit-to-templates",e),Ft=({num_id:e})=>k.post(`/api/unsubmit-to-templates/${e}`),jt=e=>k.get(`/api/template/stats/${e}`),zt=e=>k.get(`/api/submit-to-templates/${e}`)});async function Ki(e){return await k.get(`/api/domain-reseller/${e}`)}var qt,Jt,Yt,Xi,Qt=B(()=>{"use strict";Q();qt=({numId:e,domainName:t,domainSource:r})=>k.post("/api/checkdomain",{num_id:e,domain:t,source:r}),Jt=(e,t)=>k.post(`/api/mag/domain/${e}`,{domain:t,status:"on"}),Yt=e=>k.post(`/api/mag/domain/${e}`,{status:"off"}),Xi=e=>k.post("/api/domain/visit",{domain:e})});var tr,or,nr,ir,Xt,Kt,Zt=B(()=>{"use strict";Q();tr=async({email:e,projectNumIds:t,folderIds:r,sharesAll:c,role:m,folderRoles:T,projectRoles:u})=>{let P=await k.post("/api/team",{email:e,mags:t,folders:r,sharesAll:c,role:m,folderRoles:T,projectRoles:u});if(!P.teamMember)throw P.error||P;return P.teamMember},or=async({email:e,projectNumIds:t,folderIds:r,sharesAll:c,role:m,folderRoles:T,projectRoles:u})=>{let P=await k.put("/api/team",{email:e,mags:t,folders:r,sharesAll:c,role:m,folderRoles:T,projectRoles:u});if(!P.teamMember)throw P.error||P;return P.teamMember},nr=e=>k.delete("/api/team",{id:e}),ir=e=>k.post("/api/team/invite",{email:e}),Xt=()=>k.get("/api/team"),Kt=(e,t={isPending:!1})=>{let r=new URLSearchParams(t);return k.get(`/api/project/${e}/team${r.toString()?"?"+r:""}`)}});function Dr({project:e,router:t,inPreview:r,children:c}){let m=(0,a.useCallback)(o=>{let n={...o.attributes};return delete n.children,n},[]),[T,u]=(0,a.useState)(()=>{let o=e.pages.models.map(s=>m(s));o.sort((s,d)=>s.num-d.num);let n=We(o,null);return{project:e.attributes,owner:e.user.attributes,isOwner:!!t.isOwner,inPreview:!!r,pages:o,trashPages:[],pageRecentlyDeleted:!1,userTemplates:[],currentPageNum:t.getCurrentPageNum(),currentPageId:t.getCurrentPageId(),pagesTree:n,pagesParams:Ce(n,{}),codeInjectUpgradeAlertShown:!1,publishInProgress:!1,unpublishInProgress:!1,isPublishError:!1,selectedPages:[],lockedPages:{},collaborators:[],team:[],allProjects:[],teamworkProjects:[],ownedProjectTeam:[],projectTeam:[],me:t.me.attributes}}),{pages:P,pagesTree:v,pagesParams:O,project:{user:R,opts:x,num_id:S,domain:I},currentPageId:E,currentPageNum:M,publishInProgress:U,unpublishInProgress:L,isOwner:$,me:K}=T,Z=(0,a.useCallback)(o=>{let n=t.pageOrder.get("order"),s=null;if(o>n.length)s=n[n.length-1].id;else{let d=n.find(h=>h.num===o);d&&(s=d.id)}s?t.showWorkspace({id:s}):t.showWorkspace({num:1})},[t]),ee=(0,a.useCallback)((o,n)=>{let s=n.findIndex(d=>d._id===o.get("_id"));if(s>=0){let d=[...n];return d[s]&&(d[s]=m(o)),d}return n},[m]),se=(0,a.useRef)(void 0),te=(0,a.useCallback)((o,n={})=>{se.current&&(se.current.hide(),se.current.remove()),se.current=new Tt({$parent:document.querySelector("body > .popups"),router:t,opts:{type:"type-more-pages",is_contributor:!t.isOwner,owner_email:R?R.email:"",...n},alert_source:o}),se.current.render()},[R,t]),at=(0,a.useCallback)(()=>{u(o=>({...o,pageRecentlyDeleted:!1}))},[]),Me=(0,a.useRef)(void 0),lt=(0,a.useCallback)(()=>{u(o=>({...o,pageRecentlyDeleted:!0})),Me.current&&clearTimeout(Me.current),Me.current=setTimeout(()=>{at()},4500)},[at]),ae=(0,a.useCallback)((o,n)=>e.set(o,n),[e]),Te=(0,a.useCallback)((o,n)=>e.unset(o,n),[e]),ko=(0,a.useCallback)((o,n)=>e.save(o,n),[e]),Co=(0,a.useCallback)((o,n,s)=>{let d=e.pages.get(o);if(!d)throw new Error("Element not found");return d.set(n,s)},[e]),Wo=(0,a.useCallback)((o,n,s)=>{let d=e.pages.get(o);if(!d)throw new Error("Element not found");return d.unset(n,s)},[e]),Oe=(0,a.useCallback)((o,n,s)=>{let d=e.pages.get(o);if(!d)throw new Error("Page not found");return d.save(n,{...s||{},patch:!0})},[e]),vo=(0,a.useCallback)(o=>{u(n=>({...n,currentPageNum:o}))},[]),dt=(0,a.useCallback)(o=>{u(n=>({...n,inPreview:o}))},[]),Mo=(0,a.useCallback)((o,n)=>{u(s=>({...s,pagesParams:{...s.pagesParams,[o]:{...s.pagesParams[o],collapsed:n}}}))},[]),le=(0,a.useCallback)(async o=>{await e.pages.find(s=>s.attributes._id===o).updateScreenshots(e.get("num_id"))},[e]),Oo=(0,a.useCallback)(async o=>{await e.pages.find(s=>s.attributes._id===o).updateBrokenScreenshot(e.get("num_id"))},[e]),Ao=(0,a.useCallback)((o,n,s)=>new Promise((d,h)=>{let{newPageNum:b,newPageParentId:C}=ke(o,P,v,O),f=t.workspace.page.get("order")?.default,H={num:b};n&&(H={...H,...n}),e.addPage(H,F=>{if(F&&F.err)h(F);else{let N=F;if(n?window.RM.constructorRouter.trigger("notice:triggerMetrics","templateUsed"):N.isEmptyPage=!0,N.get("num")===2&&setTimeout(()=>{window.RM.constructorRouter.trigger("notice:triggerEduTip","eduTipUseNavigation",{standAlone:!0})},0),N.set("parentPage",C),t.pageOrder.reorderPagesAfterAdd({page:N,magId:e.get("_id")}),e.onAdd(N),n){N.from_template=!0;let pt=N.hasGlobalWidgets();pt||N?.updateScreenshots(e.get("num_id")),pt&&(e.addGlobalWidgetsFromTemplate(N),e.pages.map(de=>de.attributes._id).filter(de=>de!==N.id).forEach(de=>le(de)))}s||t.showWorkspace({id:N.id}),d(N)}},!0,f)}),[t,e,P,v,O,le]),Io=(0,a.useCallback)(o=>new Promise((n,s)=>{let d=e.getPage(o);if(!d)return s(new Error("Could not find page"));d.get("mid")||d.save({mid:e.get("_id")},{patch:!0,silent:!0});let{newPageNum:h,newPageParentId:b}=ke(d.get("num"),P,v,O);d.duplicate(C=>{if(C instanceof Error)return C.message==="Server error: permission_denied"&&(he()?t.trigger("notice:show","unpauseSubscriptionToCreatePage",{canBeClosed:!0}):te("duplicate page",{type:"type-more-pages"})),s(C);let y=C;y.set("parentPage",b),t.pageOrder.reorderPagesAfterAdd({page:y,magId:e.get("_id")}),e.onAdd(y),t.gg.guides?.model&&(t.gg.guides.model.addPage(y.id,{silent:t.gg.guides.hidden}),t.gg.guides.model.save()),t.showWorkspace({id:y.id}),n(C)},{num:h})}),[t,e,P,v,O,te]),Bo=(0,a.useCallback)(async()=>{let o=t._pageChanged;o&&typeof o=="string"&&(t._pageChanged=!1,await le(o))},[t,le]),Uo=(0,a.useCallback)(o=>new Promise((n,s)=>{t.pageOrder.saveInProgress()||(t.pageOrder.save({order:o,mid:t.mag.id},{success:()=>{e.trigger("change:pids",e,e.get("pids")),n()},error:s}),e.trigger("change:pids",e,e.get("pids")))}),[t,e]),Eo=(0,a.useCallback)(o=>new Promise((n,s)=>{if(t.isPageLocked(o))return s(new Error("This page is locked"));if(e.get("pids").length===1)return s(new Error("Can't delete last page"));let d=O[o],h=[];if(d&&d.children.length){let y=d.children;d.collapsed?t.pageOrder.removeParentIds(y):h=[...y]}if(h.push(o),!e.checkDeletingPages(h))return s(new Error("Can't delete all pages"));let b=h.includes(E),C=M;t.pageOrder.deletePagesFromOrder(h,e.get("_id")).then(()=>{e.deletePages(h,y=>{y instanceof Error?(t.pageOrder.load(e),s(y)):y&&y.deleteNotEmptyPages&&lt(),b?Z(C):t.triggerPageChange(),h.forEach(f=>t.removeWorkspace(f)),n({deleted:h})})},(y,f)=>{s(new Error(f))})}),[t,e,O,E,M,lt,Z]),_o=(0,a.useCallback)(o=>new Promise((n,s)=>{e.restorePage(o,{success:d=>{let h=t.workspace.getPageNum();if(!h)throw"Unable to get current page number";let{newPageNum:b,newPageParentId:C}=ke(h,P,v,O);d.set("num",b),d.set("parentPage",C),t.pageOrder.reorderPagesAfterAdd({page:d,magId:e.get("_id")}),e.onAdd(d),e.save(),t.showWorkspace({id:d.id}),n(d)},error:d=>{let h=JSON.parse(d.responseText);h.err==="permission_denied"&&te("restore page",{type:"type-more-pages"}),s(h)}},!0)}),[t,e,P,v,O,te]),Do=(0,a.useCallback)(o=>e.deleteTrashPages(o),[e]),Lo=(0,a.useCallback)(()=>new Promise(o=>{e.get("has_deleted_pages")?e.fetchTrashPages().then(n=>{n&&u(s=>({...s,trashPages:n})),o(n)}):o([])}),[e]),Ro=(0,a.useCallback)(()=>e.emptyTrash().then(()=>{u(o=>({...o,trashPages:[]}))}),[e]),Ho=(0,a.useCallback)(()=>e.loadUserTemplates().then(o=>(Array.isArray(o)&&u(n=>({...n,userTemplates:o})),o)),[e]),Go=(0,a.useCallback)(()=>e.hasGlobalWidgets(),[e]),No=(0,a.useCallback)((o={})=>t.createTemplateFromCurrentPage(o).then(n=>(n&&u(s=>{let d=Array.from(s.userTemplates);return d.unshift(n),{...s,userTemplates:d}}),n)).catch(n=>{throw n&&n.message==="permission denied"&&te("create user template",{type:"type-more-pages"}),n}),[t,te]),Vo=(0,a.useCallback)(o=>Nt(o).then(()=>{u(n=>({...n,userTemplates:n.userTemplates.filter(s=>s.id!==o)}))}),[]),Fo=(0,a.useCallback)((o,n)=>{let s={hyphen:"The link should not start or end with a hyphen",onlyNumbers:"The link should not consist of digits only",uriLength:"The link should be less than 128 characters long",used:"You already have a page with this link",pageNotFound:"Can't find current page"},d=e.getPage(o);if(d){let h=d.validate({uri:n,parentPage:d.get("parentPage")});return h?s[Object.keys(h)[0]]:void 0}else return s.pageNotFound},[e]),Ae=(0,a.useCallback)(async()=>{let o=e.getUsedFonts({includeCustom:!0,excludeUnusedDefault:!0}),n=Pt.sortFontsByProvider(o);return yt(e.id,n,!0)},[e]),jo=(0,a.useCallback)(()=>{let o=e.get("user").permissions||{},n=o._reasons||{};return o.can_submit_template||n.can_submit_template?.code!=="reason_email_not_confirmed"},[e]),zo=(0,a.useCallback)(async(o={})=>{let n=e.get("user").permissions||{},s=bt(ce.environment.preview,e.getAllWidgets()),d=K?.plan?.level,h=o.isSharedAsTemplate,b;d==="personal"||d==="freelancer"?b="Please upgrade account to publish another project. Check out the pricing to learn more.":b="Please upgrade your plan to publish more than one project.";let C="Injected Code, Forms, Lottie and Shots will not work in Published project.";if(n.can_publish){if(s&&!n.can_use_e_commerce)throw new G({message:"Please upgrade your account to publish project with ecommerce.",tag:"type-publish-ecommerce"});if(h&&!n.can_publish_shared_template)throw new G({message:"Upgrade your plan to publish more templates.",tag:"type-free-publish-template-limit"});if(e.hasCodeInjection()&&!t.me?.get("permissions")?.can_inject_code&&!o.skipWarnings)throw new G({message:C,tag:"type-code-injection",type:"warning"});if(e.hasWidgetsWithType("shots")&&!t.me?.get("permissions")?.can_use_shots&&!o.skipWarnings)throw new G({message:C,tag:"type-widget-shots",type:"warning"});if(e.hasWidgetsWithType("lottie")&&!t.me?.get("permissions")?.can_use_lottie&&!o.skipWarnings)throw new G({message:C,tag:"type-widget-lottie",type:"warning"});if(e.hasWidgetsWithType("form")&&!t.me?.get("permissions")?.can_use_forms&&!o.skipWarnings)throw new G({message:C,tag:"type-widget-shots",type:"warning"})}else{let y=n._reasons||{},f=y.can_publish&&y.can_publish.code;throw new G({message:he()?"You can't publish another project. Your subscription has been paused":f==="reason_publish_limit"?b:"Please verify your email address to publish this project.",tag:he()?"type-publish-paused-subcription":f==="reason_publish_limit"?"type-publish-limit":"type-publish-noemail"})}if(!U){u(y=>(V(oe.Publish,{firstTime:!e.get("is_published"),zone:`editor ${y.inPreview?"preview":"project settings"}`,copyable:h}),{...y,publishInProgress:!0})),(o.alsoExport&&R.permissions.can_export_template||h)&&t.exportMagAsTemplateset({dontRenewScreenshots:o.dontRenewScreenshots,isSharedAsTemplate:h,templateSettings:o.templateSettings});try{await Ae();let y=e.get("num_id"),f=await St(y,h);e.set({...e.parse(f),changed:!1}),u(H=>({...H,publishInProgress:!1}))}catch{u(f=>({...f,publishInProgress:!1,isPublishError:!0})),await new Promise(f=>setTimeout(f,5e3)),u(f=>({...f,isPublishError:!1}))}}},[t,e,K,R,U,Ae]),$o=(0,a.useCallback)(async()=>{L||(u(o=>({...o,unpublishInProgress:!0})),await xt(e.get("num_id")),V("unpublish",{zone:"editor project settings"}),e.set({is_published:null,published:null,updated:null}),u(o=>({...o,unpublishInProgress:!1})))},[e,L]),qo=(0,a.useCallback)(async()=>{await ft(e.get("num_id")),window.location.reload()},[e]),Y=(0,a.useCallback)(o=>t.me&&t.me.get("permissions")[o],[t]),he=(0,a.useCallback)(()=>t.me?.get("permissions")?._reasons?.limited_usage?.code==="reason_subscription_paused",[t]),Jo=(0,a.useCallback)(()=>{if(!Y("can_export_pdf"))throw new G({message:g(xe,{children:["Please upgrade your account",i("br",{}),"to export the project to PDF.",i("br",{}),i("a",{href:`${ce.readymag_host}/pricing`,target:"_blank",rel:"noopener noreferrer",className:"learn-more",children:"See the pricing"})]}),tag:"type-export-pdf"})},[Y]),Yo=(0,a.useCallback)(()=>{if(!Y("can_export_code"))throw new G({message:g(xe,{children:["Please upgrade your account",i("br",{}),"in order to export the source",i("br",{}),"code of your projects.",i("br",{}),i("a",{href:`${ce.readymag_host}/pricing`,target:"_blank",rel:"noopener noreferrer",className:"learn-more",children:"See the pricing"}),"."]}),tag:"type-export-code"})},[Y]),Qo=(0,a.useCallback)(()=>{if(!Y("can_use_iframe"))throw new G({message:g(xe,{children:["Please upgrade your account",i("br",{}),"in order to use iframe",i("br",{}),"for your projects.",i("br",{}),i("a",{href:`${ce.readymag_host}/pricing`,target:"_blank",rel:"noopener noreferrer",className:"learn-more",children:"See the pricing"}),"."]}),tag:"type-iframe-code"})},[Y]),Xo=(0,a.useCallback)(()=>{t.openCodeEditor()},[t]),Ko=(0,a.useCallback)(()=>["ci_head","ci_css","ci_body_top","ci_body_bottom"].some(o=>!!T.project[o]),[T.project]),Zo=(0,a.useCallback)(()=>e.hasCodeInjection(),[e]),en=(0,a.useCallback)(()=>e.hasWidgetsWithType("shots"),[e]),tn=(0,a.useCallback)(()=>e.hasWidgetsWithType("form"),[e]),on=(0,a.useCallback)(o=>{u(n=>{let s=n.lastSelectedPage&&n.selectedPages.includes(n.lastSelectedPage)?n.lastSelectedPage:t.getCurrentPageId();if(s){let d=n.pagesTree.reduce((f,H)=>(f.push(H),H.children?[...f,...H.children]:f),[]),h=d.findIndex(f=>f._id===o),b=d.findIndex(f=>f._id===s),C=d.slice(Math.min(h,b),Math.max(h,b)+1).map(f=>f._id).filter(f=>!n.selectedPages.includes(f)),y=[...n.selectedPages,...C];return{...n,selectedPages:y,lastSelectedPage:o}}return{...n,lastSelectedPage:o}})},[t]),nn=(0,a.useCallback)(o=>{u(n=>{let s=[...n.selectedPages];return s.includes(o)?s.splice(s.indexOf(o),1):s.push(o),{...n,selectedPages:s,lastSelectedPage:o}})},[]),rn=(0,a.useCallback)(()=>{u(o=>({...o,selectedPages:[]}))},[]),sn=(0,a.useCallback)(()=>{if(!$)return;let o=t.getCurrentPageId(),n=e.pages.find(s=>s.attributes._id===o);t.unlockPage(n)},[t,e,$]),an=(0,a.useCallback)(()=>{t.updateUrl(),t.triggerPageChange()},[t]),ln=(0,a.useCallback)(o=>{t.getCurrentPageId()!==o.id&&t.showWorkspace(o)},[t]),Ie=(0,a.useCallback)(async o=>{let[n,s]=await Promise.all([Xt(),Kt(o,{})]),{mags:d}=await k.get("/api/readymags/user"),h=n.filter(b=>b.projectNumIds.includes(o));return h.length&&window.RM.constructorRouter.trigger("notice:triggerMetrics","collaboratorAdded"),{team:n,allProjects:d,teamworkProjects:d.filter(b=>b.num_id===o),ownedProjectTeam:h,projectTeam:s}},[]),dn=(0,a.useCallback)((o,n)=>{u(s=>({...s,team:o,ownedProjectTeam:o.filter(d=>d.projectNumIds.includes(n))}))},[]),pn=(0,a.useCallback)(o=>{let n=o||(t.me?t.me.get("_id"):"");return Lt(n)},[t]),cn=(0,a.useCallback)(o=>{let n=o||(t.me?t.me.get("_id"):"");return Rt(n)},[t]),gn=(0,a.useCallback)(o=>wt({...o,numId:o.numId?o.numId:e.get("num_id")}).then(()=>{let{isPrivate:n,isPrivatePages:s,password:d}=o;e.set({is_private:n,isPrivatePages:s,pass:d})}),[e]),un=(0,a.useCallback)(o=>Ht(o).then(()=>{e.set({creatorProfile:o})}),[e]),mn=(0,a.useCallback)(()=>jt(e.get("num_id")),[e]),Tn=(0,a.useCallback)(o=>Vt({...o,num_id:e.get("num_id")}).then(n=>(e.set({templateSubmissionStatus:n.status}),n)),[e]),hn=(0,a.useCallback)(o=>zt(o).then(n=>(e.set({templateSubmissionStatus:n.status}),n.status)),[e]),Pn=(0,a.useCallback)(()=>Ft({num_id:e.get("num_id")}).then(o=>(e.set({templateSubmissionStatus:o.status}),o.status)),[e]),bn=(0,a.useCallback)(({pageId:o,isPrivate:n,updateAll:s=!1})=>{let d=(b,C,y)=>b.map(f=>((s||f._id===C)&&(f.isPrivate=y),f)),h=s?T.pages.map(b=>b._id):[o];for(let b of h)if(typeof b<"u"){let C=Oe(b,{isPrivate:n},{patch:!0});C.done(()=>{C&&!(C instanceof Error)&&u(y=>{let f=d(y.pages,b,n),H=y.pagesTree.map(F=>({...F,isPrivate:s||F._id===b?n:F.isPrivate,children:F.children?d(F.children,b,n):F.children}));return{...y,pages:f,pagesTree:H,pagesParams:Ce(H,y.pagesParams)}})})}},[Oe,T,u]),Sn=(0,a.useCallback)(o=>{let n=R.permissions.viewer_opts_overrides||{},d={...e.get("opts"),...o==="phone_portrait"?e.get("viewport_phone_portrait")?.opts||{}:o==="tablet_portrait"?e.get("viewport_tablet_portrait")?.opts||{}:{},...n};return{...d,...e.get("is_private")&&{sharebutton:!1},...!d.menubutton&&{projectinfo:!1}}},[e,R]),Pe=(0,a.useCallback)((o,n,s)=>{let d=Qe.default.intersection(Object.keys(o),mt).length>0,h=s==="phone_portrait"||s==="tablet_portrait",b=d&&h?s:"default",C=Object.keys(o)[0],y={...o,...o.menubutton===!1&&{projectinfo:!1}};if(["arrows","menubutton","projectinfo","sharebutton","pagecounter","controlsontop","controlsontop","branding","slidein","scalableviewer"].includes(C)&&C==="scalableviewer"&&V(oe.SettingsViewer,{settingsType:"scale layout"}),b==="phone_portrait"||b==="tablet_portrait"){let f=`viewport_${b}`,H={...e.get(f)?.opts||{},...y};return e.set(f,{...e.get(f)||{},opts:H},n),eo(e.get("num_id"),H,b)}else{let f={...e.get("opts"),...y};return e.set("opts",f,n),eo(e.get("num_id"),f,b)}},[e,x]),fn=(0,a.useCallback)((o,n)=>qt({numId:S,domainName:o,domainSource:n}).then(s=>(ae({last_checked_domain:o,last_checked_domain_source:n},{silent:!0}),s)),[S,ae]),xn=(0,a.useCallback)(o=>Jt(S,o).then(()=>{ae({domain:o,domainStatus:"on"})}),[S,ae]),yn=(0,a.useCallback)(()=>Yt(S).then(o=>(Te("domain"),Te("domainStatus"),V(oe.SettingsProject,{settingsType:"unmap domain"}),o)),[e,I,S,x,Te,Pe]),Be=(0,a.useCallback)((o,n)=>{o&&u(s=>{let d=o.pages.models.map(b=>m(b)).filter(b=>n.includes(b._id));d.sort((b,C)=>b.num-C.num);let h=We(d,null);return{...s,project:o.attributes,pages:d,pagesTree:h,pagesParams:Ce(h,s.pagesParams)}})},[m]),Ue=(0,a.useCallback)(o=>{o&&u(n=>({...n,project:o.attributes}))},[]),Ee=(0,a.useCallback)((o,n,s)=>{o&&(o.changed&&!s?.socketUpdate&&(o.changed.num||o.changed.parentPage)||u(d=>{let h=ee(o,d.pages);h.sort((C,y)=>C.num-y.num);let b=We(h,null);return{...d,pages:h,pagesTree:b,pagesParams:Ce(b,d.pagesParams)}}))},[ee]),_e=(0,a.useCallback)(o=>{o&&u(n=>{let s=Array.from(n.trashPages);return s.unshift(o.attributes),{...n,trashPages:s}})},[]),De=(0,a.useCallback)(o=>{o&&u(n=>{let s=Array.from(n.trashPages),d=s.findIndex(h=>h._id===o.get("_id"));return d>-1&&s.splice(d,1),{...n,trashPages:s}})},[]);(0,a.useEffect)(()=>{function o(){Ie(e.attributes.num_id).then(n=>{u(s=>({...s,...n}))})}return o(),e.on(to(),Ue),e.on("change:pids",Be),e.pages.on(oo(),Ee),e.trashPages.on("add",_e),e.trashPages.on("remove",De),A.on("refreshTeamworkData",o),()=>{e.off(to(),Ue),e.off("change:pids",Be),e.pages.off(oo(),Ee),e.trashPages.off("add",_e),e.trashPages.off("remove",De),A.off("refreshTeamworkData",o)}},[e,Ue,Be,_e,De,Ee,Ie]);let Le=(0,a.useCallback)(o=>dt(o),[]);(0,a.useEffect)(()=>(t.on("togglePreview",Le),()=>{t.off("togglePreview",Le)}),[t,Le]);let Re=(0,a.useCallback)(o=>{let n=o.getPageNum(),s=o.getPageId();n&&s&&u(d=>({...d,currentPageNum:n,currentPageId:s}))},[]);(0,a.useEffect)(()=>(t.on("pageChange",Re),()=>{t.off("pageChange",Re)}),[t,Re]);let be=(0,a.useCallback)(o=>{u(n=>({...n,currentPageNum:o.num,currentPageId:o._id}))},[]);(0,a.useEffect)(()=>(T.inPreview?t.on("previewPageChange",be):t.off("previewPageChange",be),()=>{t.off("previewPageChange",be)}),[T.inPreview,t,be]);let He=(0,a.useCallback)((o,n)=>{u(s=>({...s,lockedPages:{...s.lockedPages,[o]:n}}))},[]),Ge=(0,a.useCallback)(o=>{u(n=>{let{[o]:s,...d}=n.lockedPages;return{...n,lockedPages:d}})},[]),Ne=(0,a.useCallback)(({list:o})=>{u(n=>({...n,collaborators:o||[]}))},[]);(0,a.useEffect)(()=>(A.on("page:locked",He),A.on("page:unlocked",Ge),A.on("sockets:connect",Ne),()=>{A.off("page:locked",He),A.off("page:unlocked",Ge),A.off("sockets:connect",Ne)}),[He,Ge,Ne]),(0,a.useEffect)(()=>{x.branding===void 0&&Pe({branding:x.endpage})},[x,Pe]);let wn=(0,a.useCallback)(o=>{let n=T.project.user.permissions.viewer_opts_overrides||{};return{disabled:[...Object.keys(n),...o?.menubutton?[]:["projectinfo"],...T.project.is_private?["sharebutton"]:[],...T.project.user.permissions.must_show_branding?["branding"]:[]],permissionOverrides:n}},[T.project]),kn=(0,a.useCallback)(async(o,n)=>{await Ct(o,n),u(s=>({...s,project:{...s.project,allow_iframe_embed:o==="allow"}}))},[]),Cn=(0,a.useCallback)(()=>{let o=t.workspace.$scroller.scrollTop();t.togglePreview({scrollTop:o,pageNumber:M}),t.trigger("notice:triggerEduTipClose")},[t,M]),Wn={projectSet:ae,projectUnset:Te,projectSave:ko,pageSet:Co,pageUnset:Wo,pageSave:Oe,setCurrentPageNum:vo,setInPreview:dt,setPageCollapse:Mo,addNewPage:Ao,duplicatePage:Io,renewLastScreenshot:Bo,updatePageScreenshot:le,updateBrokenScreenshot:Oo,restorePage:_o,saveOrder:Uo,deletePage:Eo,deletePagesFromTrash:Do,updateTrash:Lo,emptyTrash:Ro,getUserTemplates:Ho,hasGlobalWidgets:Go,createTemplateFromCurrentPage:No,deleteUserTemplate:Vo,validatePageUri:Fo,updateUsedFonts:Ae,publishWithNotice:zo,unpublish:$o,restoreToPublished:qo,checkPDFExportPermission:Jo,checkHTMLExportPermission:Yo,checkIFrameExportPermission:Qo,openCodeEditor:Xo,hasProjectCode:Ko,hasCustomCode:Zo,hasShots:en,hasForms:tn,hasPermission:Y,isSubscriptionPaused:he,selectPage:nn,selectPagesRange:on,deselectPages:rn,takeOverCurrentPage:sn,updateUrl:an,changeWorkspace:ln,loadTeamworkData:Ie,updateTeam:dn,getProjectOptions:Sn,setProjectOptions:Pe,loadUserProjectsLinks:pn,getDomainsAmount:cn,setPrivacy:gn,sendCreatorProfile:un,getSubmissionStatus:hn,sendTemplateSubmission:Tn,sendUnsubmitTemplate:Pn,setPageIsPrivate:bn,checkDomain:fn,mapDomain:xn,unmapDomain:yn,getProjectPermissionsOverrides:wn,toggleAllowIframeEmbed:kn,switchToPreview:Cn,fetchTemplateStats:mn,checkIsEmailVerified:jo};return i(no.Provider,{value:{...T,...Wn,projectMag:e},children:c})}var a,Qe,no,eo,We,Ce,to,oo,Lr,io=B(()=>{"use strict";a=pe(Ve());Fe();Qe=pe(ct());_t();Q();Un();_n();Dn();An();fe();Mn();Dt();In();Ln();Je();$t();Qt();Zt();$e();Ye();q();no=(0,a.createContext)({}),eo=Qe.default.throttle(kt,300),We=(e,t)=>{let r=[];for(let c in e)if(e[c].parentPage===t){let m=We(e,e[c]._id),T=Object.assign({},e[c]);m.length&&(T.children=m),r.push(T)}else if(e[c].parentPage===void 0){let m=Object.assign({},e[c]);r.push(m)}return r},Ce=(e,t)=>{let r={};return e.forEach((c,m)=>{if(r[c._id]={collapsed:t[c._id]?t[c._id].collapsed:!0,viewNum:m+1,uri:c.uri?c.uri:(m+1).toString(),children:[]},c.children){let T=[];c.children.forEach((u,P)=>{T.push(u._id),r[u._id]={collapsed:t[u._id]?t[u._id].collapsed:!0,viewNum:P+1,uri:u.uri?u.uri:(P+1).toString(),children:[],parentId:c._id}}),r[c._id].children=T}}),r},to=()=>["title","description","user","folder","uri","domain","domainStatus","last_checked_domain","has_deleted_pages","master_share_pid","changed","is_published","is_private","isPrivatePages","isCopyableTemplate","pass","pass_bg","published","opts","viewport_phone_portrait","viewport_tablet_portrait"].map(t=>`change:${t}`).join(" "),oo=()=>["num","parentPage","screenshot","viewport_phone_portrait","viewport_tablet_portrait","title","uri","seo","hidden","custom_shares"].map(t=>`change:${t}`).join(" ");Lr=()=>(0,a.useContext)(no)});var Xe=B(()=>{"use strict"});function Xr({magModel:e,router:t,children:r}){let[c,m]=(0,D.useReducer)(jn,{router:t,magModel:e},Vn);(0,D.useEffect)(()=>{let x=()=>{m({type:"togglePreview"})};return c.inPreview?(window.RM.constructorRouter.off("previewOpen",x),window.RM.constructorRouter.on("previewClose",x)):(window.RM.constructorRouter.off("previewClose",x),window.RM.constructorRouter.on("previewOpen",x)),()=>{window.RM.constructorRouter.off("previewOpen",x),window.RM.constructorRouter.off("previewClose",x)}},[c.inPreview]),(0,D.useEffect)(()=>{localStorage.setItem(ro,JSON.stringify({gridSize:c.gridSize}))},[c.gridSize]);let T=(0,D.useCallback)(()=>{m({type:"openMagMenu"})},[]),u=(0,D.useCallback)(()=>{m({type:"closeMagMenu"})},[]),P=(0,D.useCallback)((x,S)=>{S.viewertype!==c.magMenuOrientation&&m({type:"setMagMenuOrientation",orientation:S.viewertype}),S.menubutton!==c.magMenuOn&&m({type:"setMagMenu",isOn:S.menubutton}),S.controlsontop!==c.controlsOnTop&&m({type:"setControlsOnTop",onTop:S.controlsontop})},[c.magMenuOrientation,c.magMenuOn,c.controlsOnTop]);(0,D.useEffect)(()=>(A.on("magMenu:open",T),A.on("magMenu:close",u),()=>{A.off("magMenu:open",T),A.off("magMenu:close",u)}),[T,u]),(0,D.useEffect)(()=>(A.listenTo(e,"change:opts",P),()=>{A.stopListening(e,"change:opts",P)}),[P]);let v=(0,D.useCallback)(()=>{m({type:"setReadyToPublish",ready:!0})},[]);(0,D.useEffect)(()=>(A.listenTo(t,"previewMag:load:success",v),()=>{A.stopListening(t,"previewMag:load:success",v)}),[v]);let O=()=>{m({type:"toggleCartSidebarState"})};(0,D.useEffect)(()=>(A.on("ecommerce:cartsidebar:visibility:changed",O),()=>{A.off("ecommerce:cartsidebar:visibility:changed",O)}),[O]);let R=(x,S)=>new Promise((I,E)=>{let M=e.getPage(x);M||I(null),M.save({hidden:S}).done(U=>{I(U)}).fail(U=>{E(U.responseJSON)})});return i(ve.Provider,{value:{...c,dispatch:m,setPageVisibility:R},children:r})}var D,ve,ro,so,Vn,Fn,jn,Kr,ao=B(()=>{"use strict";D=pe(Ve());Xe();fe();q();ve=(0,D.createContext)({}),ro="rm_pageSettings",so={};try{let e=localStorage.getItem(ro);so=JSON.parse(e||"{}")}catch{}Vn=({router:e,magModel:t})=>({inPreview:!!e.previewMode,isMagMenuOpen:!1,isTrashOpened:!1,isPageSettingsOpened:!1,isPrivatePagesOpened:!1,isHelpPopupOpened:!1,isUserTemplatesModalShown:!1,isRmTemplatesModalShown:!1,isPageActionsPopupOpenedFor:!1,gridSize:so.gridSize||0,selectedPages:{},isDragging:!1,magMenuOrientation:t.attributes.opts.viewertype,magMenuOn:t.attributes.opts.menubutton,controlsOnTop:t.attributes.opts.controlsontop,readyToPublish:!0,addingPage:!1,isTeamworkModalOpened:!1,exportAsTemlate:!1,dontRenewScreenshots:!1,currentOnboardingType:e.currentOnboardingType,helpTourIsFinished:!!e.helpTourIsFinished,isCartSidebarOpened:!1,showTips:!!e.me?.attributes.constructor_show_tips,masterSharePidIsChanging:!1,isCopyableSwitcherEnabled:!!t.attributes.isCopyableTemplate,isTemplateShareSettingsOpened:!1}),Fn=(e,t)=>{let r={...e.selectedPages};return r[t]?delete r[t]:r[t]=!0,r},jn=(e,t)=>{switch(t.type){case"togglePreview":{let r=!e.inPreview;return{...e,inPreview:r,readyToPublish:r?!1:e.readyToPublish,notice:void 0}}case"openMagMenu":return{...e,isMagMenuOpen:!0};case"closeMagMenu":return{...e,isMagMenuOpen:!1};case"setMagMenuOrientation":return{...e,magMenuOrientation:t.orientation};case"setMagMenu":return{...e,magMenuOn:t.isOn};case"setControlsOnTop":return{...e,controlsOnTop:t.onTop};case"toggleTrash":return{...e,isTrashOpened:!e.isTrashOpened};case"togglePageSettings":return{...e,isPageSettingsOpened:!e.isPageSettingsOpened,isHelpPanelOpen:!1};case"togglePrivatePages":return{...e,isPrivatePagesOpened:t.payload?!0:!e.isPrivatePagesOpened,privatePageSelected:t.payload};case"toggleHelpPopup":return{...e,isHelpPopupOpened:!e.isHelpPopupOpened};case"toggleHelpTourIsFinished":return{...e,helpTourIsFinished:t.finished};case"toggleUserTemplatesModal":return{...e,isUserTemplatesModalShown:!e.isUserTemplatesModalShown};case"toggleRmTemplatesModal":return{...e,isRmTemplatesModalShown:!e.isRmTemplatesModalShown};case"setPageActionsPopup":return{...e,isPageActionsPopupOpenedFor:t.payload};case"toggleGridSize":return{...e,gridSize:e.gridSize===0?1:0};case"togglePageSelection":return{...e,selectedPages:Fn(e,t.payload)};case"setDragging":return{...e,isDragging:t.payload};case"setReadyToPublish":return{...e,readyToPublish:t.ready};case"setAddingPage":return{...e,addingPage:t.inProgress};case"toggleTeamworkModal":return{...e,isTeamworkModalOpened:t.payload};case"toggleExportAsTemlate":return{...e,exportAsTemlate:!e.exportAsTemlate};case"toggleDontRenewScreenshots":return{...e,dontRenewScreenshots:!e.dontRenewScreenshots};case"setOnboardingType":return{...e,currentOnboardingType:t.onboardingType};case"toggleCartSidebarState":return{...e,isCartSidebarOpened:!e.isCartSidebarOpened};case"toggleShowTips":return{...e,showTips:!e.showTips};case"toggleMasterSharePidChanging":return{...e,masterSharePidIsChanging:!e.masterSharePidIsChanging};case"toggleTemplateShareMode":return{...e,isCopyableSwitcherEnabled:!e.isCopyableSwitcherEnabled};case"ToggleTemplateShareSettings":return{...e,isTemplateShareSettingsOpened:!e.isTemplateShareSettingsOpened};default:return e}};Kr=()=>(0,D.useContext)(ve)});var lo=B(()=>{"use strict";io();ao();Xe()});function hs(){let e=tt(),t=(0,me.useContext)(ve);(0,me.useEffect)(()=>{typeof window<"u"&&window.RM&&z({...e,router:window.RM.constructorRouter})},[]);let[{router:r}]=ti(),c=(x,S,I)=>{let E=I?.me;if(!E)return;let M=E.get("edu_tips_state")||{};if(M[x]=S,Xn({tipsState:M,router:I})){let U=nt();ot(U),To(M),S===2&&Jn(E,{edu_tips_state:M,behavior_metrics:U})}},m=(x,S={})=>{re()||(S.closeByTimer&&(delete S.closeByTimer,setTimeout(()=>{z(e.visible?{...e,visible:!1}:e)},et)),z({...e,...S,message:x,needShowHelpIcon:!1,visible:!0,isTipType:!1}))},T=x=>{z({...e,message:x})},u=(x={})=>{let S=tt();S.message==="eduTipMobileLayoutVideo"&&(x.context==="clickOnWorkSpace"||x.context==="timeout")||S.message&&(c(S.message,3,r),z({...S,visible:!1}))},P=(x,S={})=>{if(re()||!r||!r.me||!t.showTips||!Ze())return;let E=(r.me.get("edu_tips_state")||{})[x]||0;if(S.closeByTimer)delete S.closeByTimer,co(),ge=setTimeout(()=>{u({context:"timeout"})},et);else{co(),ge=setTimeout(()=>{u({context:"timeout"})},$n);let M=Yn(x);M&&c(M,3,r)}switch(E){case 3:break;case 2:if(S.showOnce)break;z({...e,visible:!0,message:x,canBeClosed:!0,needShowHelpIcon:!0,isTipType:!0,standAlone:S.standAlone});break;case 0:{c(x,2,r),A.trigger("tips:show",x);let M=Zn(x);M&&V(oe.EditorTips2,{tip:M,action:"impression"}),Qn(),v(),z({...e,visible:!0,message:x,canBeClosed:!0,needShowHelpIcon:!0,isTipType:!0,standAlone:S.standAlone})}}},v=()=>{e.visible&&z({...e,visible:!1})},O=(x,S)=>{if(re()||!r||!r.me||!r.me.get("constructor_show_tips")||!t.showTips||!Ze())return;let I=Kn(x,S,r),E=r.me.get("edu_tips_state")||{},M=(U,L)=>{if(!U||!L)return!1;if(typeof L!="function"&&"orConditions"in L&&Array.isArray(L.orConditions))return L.orConditions.some($=>M(U,$));if(typeof L!="function"&&!(L instanceof Array)){for(let $ in L)if(L.hasOwnProperty($)){let K=L,Z=U?.[$],ee=K[$];if(typeof ee=="number"&&typeof Z=="number"){if(ee>Z)return!1}else if(ee!==Z)return!1}return!0}return!1};for(let U in Ke)if(Ke.hasOwnProperty(U)&&!E[U]){let L=Ke[U],$=typeof L=="function"?L(I):M(I,L),K=qn.includes(U);$&&P(U,{showOnce:!0,standAlone:K})}},R=({id:x,color:S})=>{if(re()||!r||!r.me||!Ze())return;let I=r.me.get("behavior_metrics")||{},E=I.triggeredColors||{},M=Array.isArray(S)?S[0]:S;if(x in E)E[x]=M;else{for(let U of Object.values(E))U===M&&P("eduTipUseColorPalette");E[x]=M,I.triggeredColors=E,r.me.save({behavior_metrics:I},{patch:!0})}};return(0,me.useEffect)(()=>{if(r)return r.on("notice:show",m),r.on("notice:hide",v),r.on("notice:triggerEduTip",P),r.on("notice:triggerEduTipClose",u),r.on("notice:triggerMetrics",O),r.on("notice:triggerColorMetrics",R),()=>{r.off("notice:show",m),r.off("notice:hide",v),r.off("notice:triggerEduTip",P),r.off("notice:triggerEduTipClose",u),r.off("notice:triggerMetrics",O),r.off("notice:triggerColorMetrics",R)}},[r,e]),{showNotice:m,setNoticeMessage:T,triggerEduTip:P,triggerEduTipClose:u,hideNotice:v,triggerMetrics:O,triggerColorMetrics:R}}function Ps(e,t){if(re())return;let r=tt();t.closeByTimer&&(delete t.closeByTimer,setTimeout(()=>{z(r.visible?{...r,visible:!1}:r)},et)),z({needShowHelpIcon:!1,isTipType:!1,...t,message:e,visible:!0})}function bs(){z({visible:!1,variant:void 0,placement:void 0,withLoader:!1})}var ue,me,zn,Ke,et,$n,ge,ms,qn,po,Jn,Ts,Yn,Ze,Qn,uo,mo,ot,nt,To,ho,Xn,Kn,Zn,ei,co,ti,z,tt,Ye=B(()=>{"use strict";ue=pe(ct()),me=pe(Ve());Fe();ze();fe();$e();go();lo();vn();zn=5,Ke={eduTipOnDeleteMobileWidget:{widgetDeletedOnMobile:!0},eduTipUseFix:{countWidgetCreated:11,fixedWidgetUsed:void 0},eduTipUseAbovePages:{countFixedWidgetCreated:3,onAllPagesWidgetUsed:void 0},eduTipUsePlusIcon:{helpTourSkipped:!0},eduTipUseWidgetSettings:{helpTourSkipped:!0,countWidgetCreated:1},eduTipUseBlocks:{secondWidgetMoved:!0},eduTipUseUndo:{widgetMoved:!0,countActionsCanceled:void 0},eduTipUseTextTypographyControl:{templateUsed:void 0,countTextWidgetCreated:5},eduTipUseTextEditControl:{templateUsed:void 0,textWidgetCopied:!0},eduTipUseArrangeControl:{mobileGroupSelected:!0},eduTipUseGroupEditing:{multipleWidgetsOfSameTypeSelected:!0},eduTipUseGrids:{templateUsed:void 0,orConditions:[{countWidgetCreated:3},{countTextWidgetCreated:3},{gridsShortcutPressed:!0}]},eduTipUseAnimation:{animationPanelOpened:!0},eduTipUseLearn:{countActionsCanceled:3},eduTipUsePresets:{countWidgetPanelOpened:3},eduTipUseHideWidget:{opacityAnimationAdded:!0},eduTipNewTemplate:{newProjectAfterTemplatesOnboarding:!0},eduTipUseComments:{collaboratorAdded:!0},eduTipDragGroup:{groupMovedDown:!0},eduTipUseCodePanel:{codePanelOpened:!0},eduTipMobileLayoutVideo:{viewportAdded:!0}},et=6e3,$n=15e3,ge=null,ms=["eduTipUseWidgetSettings","eduTipUseColorPalette","eduTipUseArrangeControl","eduTipUseTextEditControl","eduTipUseTextTypographyControl","eduTipUseGroupEditing"],qn=["eduTipUseOnboarding","eduTipUseNavigation","eduTipDragGroup","eduTipOnDeleteMobileWidget","eduTipUseFix","eduTipUseLearn","eduTipUseUndo","eduTipUseCodePanel"],po=[["eduTipUseTextEditControl","eduTipUseTextTypographyControl"]],Jn=gt((e,t)=>{e.save(t,{patch:!0,silent:!0})},3e3,{trailing:!0}),Ts=e=>{let t=e?.me;if(!t)return;let r=t.get("behavior_metrics")||{},c=nt(),m={...r,...c},T=t.get("edu_tips_state")||{},u=ho(),P={...T,...u},v=!ue.default.isEqual(c,m),O=!ue.default.isEqual(u,P);v&&ot(m),O&&To(P)},Yn=e=>{for(let t=0;t<po.length;t++){let r=po[t];if(r.includes(e))return r.find(c=>c!==e)}return!1},Ze=()=>parseInt(sessionStorage.getItem("shownTipsCount")||"0",10)<zn,Qn=()=>{let e=parseInt(sessionStorage.getItem("shownTipsCount")||"0",10);sessionStorage.setItem("shownTipsCount",(e+1).toString())},uo=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},mo=e=>{let t=localStorage.getItem(e);return t?JSON.parse(t):{}},ot=e=>{uo("userMetrics",e)},nt=()=>mo("userMetrics"),To=e=>{uo("eduTipsState",e)},ho=()=>mo("eduTipsState"),Xn=({tipsState:e,metrics:t,router:r})=>{let c=r?.me;if(!c)return!1;let m=e||c.get("edu_tips_state")||{},T=t||c.get("behavior_metrics")||{},u=ho(),P=nt(),v=!ue.default.isEqual(u,m),O=!ue.default.isEqual(P,T);return v||O},Kn=(e,t,r)=>{let c=r?.me;if(!c)return{};let m=c.get("behavior_metrics")||{},T=e.includes("count"),u=m[e];return T&&t===void 0?m[e]=typeof u=="number"?u+1:1:m[e]=t===void 0?!0:t,ot(m),m},Zn=e=>{switch(e){case"eduTipUsePlusIcon":return"plus icon";case"eduTipUseWidgetSettings":return"widget settings";case"eduTipUseBlocks":return"distance between blocks";case"eduTipUseNavigation":return"horizontal vertical navigation";case"eduTipUseColorPalette":return"palette";case"eduTipUseTextTypographyControl":return"text styles";case"eduTipUseTextEditControl":return"text styles";case"eduTipUseOnboarding":return"beginners onboarding kit";case"eduTipUseArrangeControl":return"arrange";case"eduTipUseUndo":return"undo";case"eduTipUseBlueDiamond":return"blue diamond";case"eduTipUseGrids":return"use grids";case"eduTipUseAnimation":return"animate widgets";case"eduTipOnDeleteMobileWidget":return"widget still exists in desktop";case"eduTipDragGroup":return"triangle icon";case"eduTipUseFix":return"fix any widget";case"eduTipUseAbovePages":return"above pages toggle";case"eduTipUseCodePanel":return"code";case"eduTipUseComments":return"comments";case"eduTipUseLearn":return"link to learn";case"eduTipUseGroupEditing":return"group edit";case"eduTipUseHideWidget":return"hide a widget";case"eduTipUsePresets":return"presets";case"eduTipNewTemplate":return"templates in pages panel";case"eduTipMobileLayoutVideo":return"mobile layout";default:return!1}},ei={message:"",visible:!1,canBeClosed:!0,needShowHelpIcon:!1,isTipType:!1,router:null},co=()=>{ge!==null&&(clearTimeout(ge),ge=null)},[ti,z,tt]=ne(ei)});var Po,bo=B(()=>{"use strict";Q();Po=e=>k.post("/api/user/feedback/onboarding",e)});var ni,ii,rt,it,Ws,So,ri,vs,fo=B(()=>{"use strict";ze();bo();Je();On();ni={isShown:!1,topic:null,rating:null},[ii,rt,it]=ne(ni),Ws=(e={hookType:"default"})=>ii(e),So=async(e,t)=>{!(t&&t.opts)||t.opts.hasSeenOnboardingSurvey||ut("viewer.onboardingSurvey")&&(rt({isShown:!0,topic:e,rating:null}),await Gt({opts:{hasSeenOnboardingSurvey:!0}}))},ri=()=>{rt({...it(),isShown:!1})},vs=async(e,t)=>{let{topic:r}=it();if(r){rt({...it(),rating:e});try{await Po({question:r,rating:e,feedback:t})}catch(c){console.error("Failed to submit onboarding rating",c)}ri()}}});var xo,st,si,yo,ai,li,J,Ns,Vs,X,wo,Fs,js,di,pi,zs,$s,qs,Js,re,go=B(()=>{"use strict";ze();Fe();fe();Bt();ie();Et();Ye();En();fo();xo={tourType:"default",modalStatus:"unshow",started:!1,waiting:!1,showNotice:!1,step:null,totalSteps:0,config:{}},st=new Set,si=()=>{let e=window.RM.constructorRouter?.me,t=e?.get("behavior_metrics")||{};if(!t||!e)return;let r={...t,constructor_tour_finished:!0};e.save({behavior_metrics:r},{patch:!0})},yo=(e,t)=>t?Array.isArray(e)?e.includes(t.name):t.name===e:!1,[ai,li,J,Ns]=ne(xo),Vs=()=>ai({hookType:"layout"}),X=e=>{li(e),A.trigger("helptour:update",e)},wo=e=>{let t=J();X({...t,modalStatus:e})},Fs=(e="default",t={headlessMode:!1})=>{if(J().started)return;let m=Object.values(we[e]),T=m[0];if(X({tourType:e,modalStatus:"unshow",started:!0,waiting:!1,showNotice:!1,step:T,totalSteps:m.length,config:t}),t.headlessMode)return;let u=e==="pro"?"helpTourPro":"helpTour";V(u,{status:"started"})},js=()=>{let{started:e}=J();e&&wo("closing")},di=()=>{let{started:e,step:t,totalSteps:r,tourType:c,config:m}=J();if(!e||!t){setTimeout(()=>{window.RM.constructorRouter.trigger("notice:triggerMetrics","helpTourSkipped")},1e3);return}st.clear(),X({...xo,tourType:c}),!m.headlessMode&&t?.num<r&&Ut()},pi=e=>{let{step:t,tourType:r,config:c}=J();if(t&&t.num>=5){let u=window.RM.constructorRouter?.me;So("How well did the product tour help you get started?",u?.attributes)}if(di(),c.headlessMode||wo("end"),e?.(),si(),c.headlessMode)return;let m=r==="pro"?"helpTourProProgress":"helpTourProgress",T=r==="pro"?"helpTourPro":"helpTour";V(m,{step:t?.num}),V(T,{status:"finished"})},zs=(e,t)=>{let r=J(),{step:c,started:m,tourType:T,totalSteps:u,config:P}=r;if(!m)return;if(!c?.nextStep){pi(t?.cb);return}let O=(Array.isArray(e)?e:[e]).includes(c.name),R=t?.fallback;if(!O||R&&!c.fallbackStep)return;let x=R&&c.fallbackStep?c.fallbackStep:c.nextStep,S=we[T][x];S&&(X({...r,waiting:!1,showNotice:!1,step:S}),!P.headlessMode&&ht(()=>{for(let I=1;I<=u&&!(I>c.num);I++)if(I<=c.num&&!st.has(I)){let E=T==="pro"?"helpTourProProgress":"helpTourProgress";V(E,{step:I}),st.add(I)}}))},$s=e=>{let t=J(),{step:r,started:c,tourType:m}=t;if(!c||!r?.prevStep||!(Array.isArray(e)?e:[e]).includes(r.name))return;let P=we[m][r.prevStep];P&&X({...t,waiting:!1,showNotice:!1,step:P})},qs=e=>{let t=J(),{step:r,started:c}=t;!c||!yo(e,r)||X({...t,waiting:!0})},Js=(e,t)=>{let r=J(),{step:c,started:m,showNotice:T}=r;!m||!yo(e,c)||X({...r,showNotice:t.show??!T})},re=()=>J().started});export{Rn as a,Hn as b,_t as c,G as d,Dt as e,Fi as f,Je as g,$i as h,qi as i,Ji as j,$t as k,Xi as l,Ki as m,Qt as n,tr as o,or as p,nr as q,ir as r,Zt as s,$e as t,l as u,p as v,qe as w,Bt as x,Ws as y,So as z,ri as A,vs as B,fo as C,J as D,Vs as E,wo as F,Fs as G,js as H,di as I,zs as J,$s as K,qs as L,Js as M,re as N,go as O,ms as P,Ts as Q,Zn as R,ti as S,tt as T,hs as U,Ps as V,bs as W,Ye as X,no as Y,Dr as Z,Lr as _,ve as $,Xr as aa,Kr as ba,lo as ca};
